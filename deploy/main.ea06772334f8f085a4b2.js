(()=>{"use strict";var e={551:(e,t,n)=>{n.r(t)},891:(e,t,n)=>{n.r(t)},609:(e,t,n)=>{n.r(t)},232:(e,t,n)=>{n.r(t)},493:(e,t,n)=>{n.r(t)},560:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},647:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateWinner=t.deleteWinner=t.createWinner=t.getWinner=t.getAllWinners=t.switchEngineDrive=t.startStopEngine=t.updateCar=t.deleteCar=t.createCar=t.getCar=t.getAllCars=void 0;const i="http://127.0.0.1:3000";t.getAllCars=(e=1,t=7)=>n(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${i}/garage?_limit=${t}&_page=${e}`),r=yield n.json();return 200===n.status?{cars:r,count:n.headers.get("X-Total-Count")||"0"}:null}catch(e){console.log(e)}})),t.getCar=e=>n(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${i}/garage/${e}`),n=yield t.json();return 200===t.status?n:null}catch(e){console.log(e)}})),t.createCar=e=>n(void 0,void 0,void 0,(function*(){try{yield fetch(`${i}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.log(e)}})),t.deleteCar=e=>n(void 0,void 0,void 0,(function*(){try{return(yield fetch(`${i}/garage/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).status}catch(e){console.log(e)}})),t.updateCar=e=>n(void 0,void 0,void 0,(function*(){try{return(yield fetch(`${i}/garage/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).status}catch(e){console.log(e)}})),t.startStopEngine=(e,t)=>n(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${i}/engine?id=${e}&status=${t}`,{method:"PATCH"}),r=yield n.json();return{status:n.status,result:r}}catch(e){console.log(e)}})),t.switchEngineDrive=e=>n(void 0,void 0,void 0,(function*(){try{return(yield fetch(`${i}/engine?id=${e}&status=drive`,{method:"PATCH"})).status}catch(e){console.log(e)}})),t.getAllWinners=(e,t=10,r="wins",a="DESC")=>n(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${i}/winners?_page=${e}&_limit=${t}&_sort=${r}&_order=${a}`),o=yield n.json();return 200===n.status?{result:o,total:n.headers.get("X-Total-Count")||"0"}:null}catch(e){console.log(e)}})),t.getWinner=e=>n(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${i}/winners/${e}`);return{result:yield t.json(),status:t.status}}catch(e){console.log(e)}})),t.createWinner=e=>n(void 0,void 0,void 0,(function*(){try{return(yield fetch(`${i}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).status}catch(e){console.log(e)}})),t.deleteWinner=e=>n(void 0,void 0,void 0,(function*(){try{return(yield fetch(`${i}/winners/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).status}catch(e){console.log(e)}})),t.updateWinner=e=>n(void 0,void 0,void 0,(function*(){try{return(yield fetch(`${i}/winners/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).status}catch(e){console.log(e)}}))},155:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.carIcon=void 0,n(551),t.carIcon=function(e){return`\n  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"\n  viewBox="0 0 4144.48 2608.97"\n   xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Layer_x0020_1">\n    <metadata id="CorelCorpID_0Corel-Layer"/>\n    <g id="_1008669264">\n     <g>\n      <path style="fill: ${e}" d="M1963.48 2.96c353.61,23.96 666.09,152.19 944.25,387.93 60.88,51.49 154.14,143.45 212.42,209.18 38.54,43.07 78.04,91.31 134.06,162.88 95.85,122.08 162.23,180.04 237.68,207.57 15.22,5.18 60.55,17.16 101.35,26.23 110.09,24.29 155.75,39.18 226.02,72.54 74.15,35.62 119.16,67.35 167.41,117.87 79.33,83.54 127.58,198.5 146.37,350.37 11.98,96.5 15.22,227 6.48,284.31 -19.75,133.74 -102.33,242.86 -234.12,308.92l-30.76 15.54 -58.61 0c-32.38,0 -59.58,-0.65 -60.55,-1.62 -0.97,-0.97 -0.65,-8.42 0.97,-16.19 7.13,-38.21 9.72,-100.06 6.48,-145.07 -8.09,-101.68 -26.87,-171.62 -69.94,-259.7 -37.24,-76.74 -78.37,-133.09 -139.57,-192.67 -106.86,-103.62 -234.76,-167.09 -383.4,-190.08 -51.16,-7.77 -153.17,-7.77 -202.39,0 -210.48,34.32 -381.45,147.66 -492.52,327.05 -77.72,124.99 -113.98,287.87 -96.82,431.32 2.59,21.37 4.85,40.8 4.85,42.74 0,3.24 -83.22,4.21 -404.77,4.21 -222.78,0 -404.77,-0.32 -404.77,-0.97 0,-0.32 2.26,-16.84 4.85,-36.27 5.51,-41.45 6.15,-113.66 1.62,-155.43 -21.05,-187.81 -117.22,-359.44 -266.5,-475.04 -208.54,-161.26 -491.23,-190.08 -729.24,-74.15 -212.1,103.3 -355.87,303.74 -385.66,537.86 -4.21,34.65 -4.85,56.34 -3.24,105.24 1.3,33.68 2.91,67.35 4.21,74.48l1.94 12.95 -17.49 -14.89c-9.71,-8.09 -28.5,-27.52 -42.09,-42.74 -105.57,-118.84 -155.43,-285.93 -138.92,-463.7 9.39,-98.44 39.5,-186.52 89.7,-261.97 23.96,-35.94 71.89,-87.75 99.74,-107.5 17.16,-11.98 17.81,-13.28 16.51,-24.94 -5.18,-45.66 17.49,-154.13 58.29,-278.8 24.29,-74.48 33.03,-95.53 64.12,-155.76 67.35,-131.47 167.41,-267.47 317.01,-431.65 58.61,-64.44 103.62,-96.5 205.63,-147.66 230.23,-115.28 529.76,-184.25 881.42,-202.71 71.56,-3.56 170.98,-3.56 227.97,0.32l-0 0zm-54.72 269.42c-66.38,18.78 -123.05,66.06 -152.19,126.61 -21.7,45.66 -22.02,48.57 -23.31,189.76 -1.62,137.3 2.26,233.15 10.36,272 10.04,48.57 33.35,83.87 63.14,96.82l15.87 6.8 506.12 -0.65 506.13 -0.97 18.46 -7.45c20.07,-8.09 48.57,-31.73 56.34,-46.63 9.39,-18.13 11.66,-42.09 6.15,-68 -9.71,-46.31 -40.48,-99.41 -100.06,-172.27 -194.94,-238 -365.91,-356.84 -562.47,-390.85 -63.46,-10.69 -85.81,-11.98 -208.54,-11.33 -98.12,0.65 -119.81,1.62 -136,6.15zm-680.01 32.7c-57.96,14.25 -143.13,43.39 -175.83,59.91 -57.96,29.14 -129.52,84.84 -175.83,136.65 -102.33,114.96 -177.45,265.53 -178.1,357.49 -0.32,31.41 3.89,48.25 16.19,65.41 12.63,17.16 25.9,26.55 49.54,33.68 18.46,5.83 35.62,6.15 319.28,6.15 295,0 299.85,0 313.46,-6.48 16.52,-8.09 28.5,-24.93 37.89,-52.46 6.8,-20.08 6.8,-25.58 8.09,-245.13 0.97,-238.98 -0.65,-287.55 -12.31,-318.31 -9.07,-24.29 -26.23,-40.15 -47.6,-43.39 -8.42,-1.3 -18.46,-3.56 -22.02,-4.86 -3.56,-1.62 -24.61,-2.27 -46.95,-1.62 -31.74,1.3 -50.19,3.89 -85.81,12.95l0 0z"/>\n      <path style="fill: ${e}" d="M3125.33 1450.41c227.97,22.02 422.58,177.13 494.79,394.09 20.72,62.5 26.23,94.23 28.17,165.79 2.91,105.57 -12.63,180.04 -55.7,270.71 -73.18,152.52 -216.31,269.09 -380.81,310.21 -296.94,74.48 -599.06,-91.64 -694.26,-381.78 -31.73,-95.85 -37.56,-198.5 -17.48,-297.59 58.29,-289.17 330.61,-489.93 625.29,-461.44l0 0zm-130.17 313.78c-13.28,3.89 -36.59,13.28 -51.81,21.05 -54.4,28.5 -93.26,68.33 -119.81,123.05 -19.1,39.83 -25.91,64.76 -28.17,106.86 -7.45,136.98 91.31,260.02 227.96,283.66 12.31,2.27 37.89,3.24 60.56,2.27 34,-1.3 43.71,-3.24 72.21,-12.95 72.21,-24.61 124.02,-69.62 158.02,-136.97 21.05,-42.1 28.17,-71.89 28.5,-121.43 0.65,-71.24 -19.43,-125.31 -67.03,-182.63 -35.3,-41.77 -101.03,-79.01 -158.02,-89.37 -28.82,-4.86 -94.55,-1.62 -122.4,6.48l0 0z"/>\n      <path style="fill: ${e}" d="M945.41 1450.09c306.98,32.06 536.24,295 523.61,600.68 -13.6,321.87 -283.02,570.89 -602.94,557.61 -124.02,-5.18 -239.63,-47.6 -336.77,-123.37 -34.97,-27.85 -89.05,-84.52 -115.6,-121.76 -121.43,-171.62 -139.89,-397.65 -47.93,-587.72 82.25,-170 244.81,-290.79 430.68,-320.58 38.86,-6.15 113.01,-8.42 148.96,-4.86zm-102.33 307.95c-89.37,15.54 -166.12,74.48 -203.68,156.41 -19.11,41.12 -25.26,73.83 -23.31,124.99 0.97,33.03 3.24,49.22 8.74,66.38 17.16,53.75 50.52,103.3 91.31,136 25.26,20.07 71.56,43.71 101.35,52.13 29.15,8.09 94.88,9.71 125.64,3.24 107.51,-22.02 192.67,-107.83 214.37,-215.34 7.45,-35.62 5.18,-95.52 -4.54,-127.91 -29.79,-99.74 -110.42,-174.54 -210.8,-194.61 -26.23,-5.18 -73.5,-5.83 -99.09,-1.3l0 0z"/>\n     </g>\n    </g>\n   </g>\n  </svg>\n  `}},60:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateElement=void 0,t.CreateElement=class{constructor(e,t="div",n=[],i="",r=!1){this.element=document.createElement(t),this.element.classList.add(...n),this.element.innerHTML=i,e&&e.append(this.element),r&&this.setDisabled(!0)}remove(){this.element.remove()}removeChilds(){for(;this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild)}setDisabled(e=!1){this.element.toggleAttribute("disabled",e)}}},430:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageCar=void 0;const r=n(155),a=n(60);n(891);const o=n(647),s=n(631);class l extends a.CreateElement{constructor(e,t,n,i){super(e,"li",["car"]),this.speed=0,this.car=t;const l=new a.CreateElement(this.element,"div",["car-buttons"]);new a.CreateElement(l.element,"button",["button","select"],"Select").element.onclick=()=>{n.element.value=t.name,n.element.dataset.id=`${t.id}`,i.element.value=t.color},new a.CreateElement(l.element,"button",["button","delete"],"Delete").element.onclick=()=>{t.id&&((0,o.deleteCar)(t.id),(0,o.deleteWinner)(t.id)),this.remove()};const d=new a.CreateElement(this.element,"div",["controls"]);this.buttonStart=new a.CreateElement(d.element,"button",["button","start"],"Start"),this.buttonStop=new a.CreateElement(d.element,"button",["button","stop"],"Stop",!0),this.buttonStart.element.onclick=()=>{t.id&&this.startCarEngine(t.id)},this.buttonStop.element.onclick=()=>{t.id&&this.stopCarEngine(t.id)},new a.CreateElement(l.element,"span",["car-name"],t.name);const c=new a.CreateElement(this.element,"div",["road"]);this.carImg=new a.CreateElement(c.element,"div",["car-icon"],(0,r.carIcon)(t.color)),new a.CreateElement(c.element,"div",["flag"],(0,s.flagDraw)()).element.setAttribute("alt","Race flag")}updateButtons(e,t,n=!1){e.setDisabled(n),t.setDisabled(!n)}stopCarEngine(e){var t;return i(this,void 0,void 0,(function*(){const n=yield(0,o.startStopEngine)(e,"stopped");200===(null==n?void 0:n.status)&&(this.updateButtons(this.buttonStart,this.buttonStop,!1),this.speed=0,null===(t=this.carAnimation)||void 0===t||t.cancel(),this.carImg.element.style.left="2%")}))}startCarEngine(e){return i(this,void 0,void 0,(function*(){const t=yield(0,o.startStopEngine)(e,"started");if(200===(null==t?void 0:t.status)){this.updateButtons(this.buttonStart,this.buttonStop,!0);const{result:e}=t,n=e.distance/e.velocity;this.animationCar(n),yield this.switchToDriveMode(e)}}))}animationCar(e){this.carAnimation=this.carImg.element.animate([{left:"2%"},{left:"90%"}],{duration:e,easing:"ease-in-out"}),this.carAnimation.play(),this.carAnimation.onfinish=()=>{this.carImg.element.style.left="90%"}}switchToDriveMode(e){return i(this,void 0,void 0,(function*(){const t=yield(0,o.switchEngineDrive)(this.car.id);return new Promise((n=>{var i;500===t&&(null===(i=this.carAnimation)||void 0===i||i.pause()),200===t&&(this.speed=Math.floor(e.distance/e.velocity),n())}))}))}}t.GarageCar=l},631:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flagDraw=void 0,t.flagDraw=function(){return'<?xml version="1.0" encoding="UTF-8"?>\n  <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n  \x3c!-- Creator: CorelDRAW 2018 --\x3e\n  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="0.891035in" height="1.06154in" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"\n  viewBox="0 0 1160.94 1383.09"\n   xmlns:xlink="http://www.w3.org/1999/xlink">\n   <defs>\n    <style type="text/css">\n     <![CDATA[\n      .fil0 {fill:#010101}\n     ]]>\n    </style>\n   </defs>\n   <g id="Layer_x0020_1">\n    <metadata id="CorelCorpID_0Corel-Layer"/>\n    <g>\n     <path class="fil0" d="M1045.21 215.66c40.25,-2.89 78.34,-17.09 115.73,-31.24 -1.18,239.46 -1.74,478.91 -2.56,718.36 -86.35,27.18 -181.11,28.53 -267.23,-0.23 -100.35,-32.12 -184.78,-97.14 -273.11,-152.3 -22.33,-13.99 -45.03,-28.58 -70.97,-34.96 -42.16,-10.74 -86.36,-9.78 -129.33,-4.92 -49.01,5.8 -97.25,17.06 -144.55,31.06 -57.66,17.24 -114.18,38.45 -168.13,65.22 0.6,-241.74 1.24,-483.48 1.95,-725.23 98.33,-37.59 200.32,-68.24 305.46,-78.33 65.46,-6.16 132.63,-4.04 195.89,15.16 34.7,10.07 66.76,27.25 97.22,46.35 64.88,39.13 126.13,84.42 193.77,118.88 44.72,22.95 95.32,37.06 145.87,32.19l0 0zm-79.02 34.49c-0.33,33.08 -0.12,66.17 -0.24,99.26 31.39,4.82 63.37,6.23 94.97,2.71 20.47,-2.46 40.6,-7.04 60.27,-13.15 -0.01,-32.8 0.35,-65.62 -0.04,-98.45 -49.95,15.39 -103.57,20.64 -154.97,9.63l0 0zm-335.05 -181.65c-0.61,43.37 -0.03,86.74 -0.59,130.1 -39.08,-19.83 -78.3,-42.27 -122.31,-48.58 -14.18,-2.44 -28.63,-2.09 -42.77,-4.68 -1.4,2.65 -2.71,5.36 -4,8.08 2.05,34.33 0.34,68.78 1.04,103.16 -0.47,9.2 1.5,18.81 -1.57,27.69 -5.7,2.52 -12.26,1.73 -18.33,2.43 -50.11,3.75 -99.5,13.89 -148.25,25.81 0.1,-47.55 -0.01,-95.11 -0.02,-142.65 42.49,-10.39 85.66,-18.49 129.31,-21.92 13.24,-1.15 26.59,-0.6 39.76,-2.29 -2.47,-35.53 -0.4,-71.23 -1.01,-106.85 -56.76,1.72 -112.95,11.29 -168.22,23.89 -0.5,35.55 -0.35,71.1 -0.56,106.63 -50.17,12.72 -99.69,27.92 -148.42,45.29 0.01,48.26 0.02,96.52 -0.01,144.76 48.62,-17.36 97.81,-33.32 147.82,-46.23 0.15,46.05 -0.3,92.08 -0.42,138.14 -50.12,12.74 -99.5,28.3 -147.96,46.34 0.02,46.35 -0.09,92.67 0.34,138.99 48.74,-17.77 98.11,-34.14 148.52,-46.46 0.06,-46.16 -0.15,-92.29 -0.1,-138.43 55.01,-15.01 111.55,-25.79 168.66,-26.79 0.38,39.05 -0.45,78.06 -0.11,117.11 0.11,5.41 -0.68,10.82 -2.13,16.05 2.47,1.8 4.96,3.58 7.48,5.34 20.42,-1.7 41,-0.53 61.16,2.59 35.73,5.4 68.09,22.63 100.03,38.51 -0.15,-46.03 0.87,-92.05 0.21,-138.08 56.01,30.94 111.1,63.61 167.81,93.35 -0.11,46.06 -0.21,92.17 -0.66,138.26 -55.97,-29 -109.97,-61.54 -165.33,-91.64 -0.38,35 0.03,70.01 -0.75,105.01 24.9,17.33 51.19,32.6 76.26,49.7 29.63,20.2 59.88,39.54 91.24,56.95 0.34,-39.9 0.37,-79.8 0.72,-119.7 52.77,26.76 107.74,50.62 165.97,62.49 1,-45.9 0.27,-91.81 1.06,-137.72 50.99,10.97 104.71,11.67 155.2,-2.34 0.17,-45.99 0.68,-91.98 0.45,-137.94 -50.61,13.52 -104.1,12.54 -155.19,2.06 -0.15,46.07 -0.62,92.12 -0.45,138.2 -58.54,-12.34 -114.1,-35.69 -167.32,-62.52 -0.39,-46.13 -0.27,-92.29 0.63,-138.39 53.11,26.84 108.4,50.73 167.01,62.57 0.14,-45.47 0.27,-90.98 0.04,-136.48 -58.52,-9.57 -113.93,-32.01 -167.18,-57.45 -0.74,-40.14 0.24,-80.27 0.22,-120.41 -44.18,-29.01 -88.12,-58.47 -133.72,-85.24 -10.83,-6.28 -22.22,-11.47 -33.56,-16.7l0 0zm334.69 693.43c-0.58,39.88 -1.12,79.78 -0.41,119.65 51.36,7.38 103.94,4.78 154.38,-7.38 -0.47,-38.23 0.26,-76.47 -0.37,-114.67 -50.05,13.42 -103.07,12.75 -153.6,2.4l0 0zm-510.4 -198.84c-55.02,4 -109.53,13.73 -162.85,27.84 0.36,35.23 -0.25,70.51 -0.15,105.75 54.93,-14.27 111.11,-24.66 167.89,-27.21 1.8,-33.78 0.11,-67.84 3.65,-101.5 -2.83,-1.68 -5.69,-3.3 -8.54,-4.87zm-412.77 -558.88c15,3.18 25.42,17.94 24.78,33.01 -0.9,438.06 -1.64,876.13 -2.59,1314.2 0.43,18.26 -17.12,33.39 -35.03,31.5 -18.01,-0.94 -31.23,-18.74 -29.71,-36.17 0.87,-436.56 1.67,-873.12 2.55,-1309.63 -1.8,-21.09 19.94,-38.12 40,-32.91zm587.25 194.1c55.75,31.09 110.5,64.04 167.94,92.01 -0.24,43.43 -0.04,86.84 -0.36,130.27 -56.73,-28.26 -110.33,-62.25 -166.72,-91.15 -3.23,45.49 0.07,91.41 -2.33,137.04 -30.03,-15.82 -60.89,-31.4 -94.49,-37.97 -23.97,-4.53 -48.47,-5.75 -72.83,-5.26 0.21,-44.28 0.31,-88.57 0.57,-132.81 0.42,-0.89 1.27,-2.69 1.69,-3.58 2.89,-0.86 5.83,-1.47 8.86,-1.85 38.76,-1.11 77.94,5.56 113.37,21.67 14.69,5.31 27.47,15.35 42.52,19.35 0.43,-0.77 1.27,-2.29 1.7,-3.07 -0.29,-41.55 0.07,-83.11 0.07,-124.65z"/>\n    </g>\n   </g>\n  </svg>'}},931:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageWrapper=void 0;const r=n(60),a=n(30),o=n(647),s=n(430),l=n(572),d=n(360);n(609);class c extends r.CreateElement{constructor(e){super(e,"header",["header"]),this.pageNumber=1;const t=new r.CreateElement(this.element,"div",["buttons"]),n=new r.CreateElement(t.element,"button",["button","buttons-garage"],"To garage");n.element.setAttribute("disabled","");const a=new r.CreateElement(t.element,"button",["button","buttons-winners"],"To winners"),s=new r.CreateElement(e,"div",["garage-items__wrapper"]),l=new r.CreateElement(s.element,"div",["header-change"]),c=new r.CreateElement(l.element,"form",["header-change__add"]),u=new r.CreateElement(c.element,"input",["name-add"]);u.element.setAttribute("type","text");const m=new r.CreateElement(c.element,"input",["color-add"]);m.element.setAttribute("type","color");const h=new r.CreateElement(c.element,"button",["button","submit-add"],"Create");h.element.setAttribute("type","button"),h.element.onclick=()=>i(this,void 0,void 0,(function*(){const e=u.element.value,t=m.element.value;e&&t?((0,o.createCar)({name:e,color:t}),yield this.updateCars(),yield this.drawCars(),yield this.updateTitle()):alert("First you must enter a valid data")}));const v=new r.CreateElement(s.element,"form",["header-change__update"]);this.nameUpdate=new r.CreateElement(v.element,"input",["name-update"],"",!1),u.element.setAttribute("type","text"),this.colorUpdate=new r.CreateElement(v.element,"input",["color-add"],"",!1),this.colorUpdate.element.setAttribute("type","color");const g=new r.CreateElement(v.element,"button",["button","submit-update"],"Update",!1);g.element.setAttribute("type","button"),g.element.onclick=()=>{this.updateSelectedCar()},new r.CreateElement(l.element,"form",["header-forms__buttons"]);const p=new r.CreateElement(s.element,"div",["buttons-wrapper"]),b=new r.CreateElement(p.element,"button",["button","button-race"],"Race");b.element.setAttribute("type","button"),b.element.onclick=()=>{this.startRaceAllCars()};const w=new r.CreateElement(p.element,"button",["button","button-reset"],"Reset");w.element.setAttribute("type","button"),w.element.onclick=()=>{this.resetCars()};const C=new r.CreateElement(p.element,"button",["button","button-generate"],"Generate cars");C.element.setAttribute("type","button"),C.element.onclick=()=>{this.generateCars()},this.title=new r.CreateElement(s.element,"h2",["title"]),this.page=new r.CreateElement(s.element,"h2",["title"]);const f=new r.CreateElement(s.element,"div",["pagination"]);this.garageItems=new r.CreateElement(s.element,"div",["garage-items"]),this.drawCars(this.pageNumber,7),this.buttonPrevPage=new r.CreateElement(f.element,"button",["button","button-generate"],"Prev. Page"),this.buttonPrevPage.element.setAttribute("type","button"),this.buttonNextPage=new r.CreateElement(f.element,"button",["button","button-generate"],"Next. Page"),this.buttonNextPage.element.setAttribute("type","button"),this.winnersPage=new d.WinnersWrapper(e),this.winnersPage.element.classList.add("invisible"),this.buttonNextPage.element.onclick=()=>{this.pageNumber++,this.updatePage(),this.updateCars(),this.drawCars()},this.buttonPrevPage.element.onclick=()=>{this.pageNumber--,this.updatePage(),this.updateCars(),this.drawCars()},a.element.onclick=()=>{s.element.classList.add("invisible"),this.winnersPage.element.classList.remove("invisible"),a.element.toggleAttribute("disabled"),n.element.toggleAttribute("disabled"),this.winnersPage.remove(),this.winnersPage=new d.WinnersWrapper(e)},n.element.onclick=()=>{s.element.classList.remove("invisible"),this.winnersPage.element.classList.add("invisible"),n.element.toggleAttribute("disabled"),a.element.toggleAttribute("disabled")},this.updateCars()}updateCars(){return i(this,void 0,void 0,(function*(){this.cars=yield(0,o.getAllCars)(),this.updateTitle(),this.updatePage()}))}updateTitle(){var e;return i(this,void 0,void 0,(function*(){this.title.element.innerHTML=`Garage - (${null===(e=this.cars)||void 0===e?void 0:e.count} cars)`}))}updatePage(){var e;return i(this,void 0,void 0,(function*(){this.page.element.innerHTML=`Page - ${this.pageNumber}`;const t=Math.ceil(Number(null===(e=this.cars)||void 0===e?void 0:e.count)/7);1===this.pageNumber&&this.buttonPrevPage.setDisabled(!0),this.pageNumber>1&&this.buttonPrevPage.setDisabled(!1),this.pageNumber===t&&this.buttonNextPage.setDisabled(!0),this.pageNumber<t&&this.buttonNextPage.setDisabled(!1)}))}generateCars(){return i(this,void 0,void 0,(function*(){for(let e=0;e<100;e-=-1){const e={name:(0,a.nameGenerator)(),color:(0,a.colorGenerator)()};yield(0,o.createCar)(e),this.updateCars()}}))}drawCars(e=this.pageNumber,t=7){var n;return i(this,void 0,void 0,(function*(){this.allCarsElements=[],this.garageItems.removeChilds(),this.cars=yield(0,o.getAllCars)(e,t),null===(n=this.cars)||void 0===n||n.cars.map((e=>{const t=new s.GarageCar(this.garageItems.element,e,this.nameUpdate,this.colorUpdate);this.allCarsElements.push(t)}))}))}startRaceAllCars(){return i(this,void 0,void 0,(function*(){const e=this.allCarsElements.map((e=>i(this,void 0,void 0,(function*(){return yield e.startCarEngine(e.car.id),e})))),t=yield Promise.race(e),n={id:t.car.id,name:t.car.name,color:t.car.color,time:+(t.speed/1e3).toFixed(2),wins:1};this.winnerPopup=new l.Winner(this.element,n),yield this.createOrUpdateWinner(n),this.winnerPopup.element.onclick=()=>{this.winnerPopup.remove()}}))}resetCars(){return i(this,void 0,void 0,(function*(){this.allCarsElements.map((e=>i(this,void 0,void 0,(function*(){yield e.stopCarEngine(e.car.id)}))))}))}createOrUpdateWinner(e){return i(this,void 0,void 0,(function*(){const t=yield(0,o.getWinner)(e.id);t&&t.result.wins&&200===t.status?(t.result.wins++,e.wins=t.result.wins,e.time&&t.result.time&&(e.time=e.time<t.result.time?e.time:t.result.time),yield(0,o.updateWinner)(e)):yield(0,o.createWinner)(e)}))}updateSelectedCar(){return i(this,void 0,void 0,(function*(){const e=this.nameUpdate.element.value,t=this.colorUpdate.element.value,n=Number(this.nameUpdate.element.dataset.id);if(e&&t&&n){const i={name:e,color:t,id:n};yield(0,o.updateCar)(i),this.drawCars()}else alert("First you must select a car")}))}}t.GarageWrapper=c},30:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.colorGenerator=t.nameGenerator=void 0;const n=["Audi","Bentley","BMW","Cadillac","Chevrolet","Citroen","Datsun","Ferrari","Fiat","Ford","Geely","Genesis","Great","Wall","Honda","Hyundai","Infiniti","Jaguar","Jeep","KIA","Lada","Lamborghini","Land","Rover","Lexus","LIFAN","Mazda","Mercedes - Benz","Mitsubishi","Nissan","Opel","Peugeot","Porsche","Ravon","Renault","Rolls - Royce","Skoda","Smart","SsangYong","Subaru","Suzuki","Toyota"],i=["Aegea","Albea","Argo","Bravo","Croma","Doblo","Ducato","Freemont","Freemont cross","Fullback","Grande punto","Idea","Linea","Mobi","Multipla","Panda","Punto","Scudo","Tipo","Tipo cross","Toro","Ascent","Brz","Forester","Impreza","Impreza wrx","Justy","Legacy","Levorg","Outback","Stella","Trezia","Tribeca"];t.nameGenerator=()=>{const e=n.length,t=i.length;return`${n[Math.ceil(Math.random()*(e-1))]} ${i[Math.ceil(Math.random()*(t-1))]}`},t.colorGenerator=()=>{const e=["1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F"];let t="#";for(let n=0;n<6;n++)t+=e[Math.ceil(Math.random()*e.length-1)];return t}},52:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersTable=void 0;const r=n(60);n(232);const a=n(155);class o extends r.CreateElement{constructor(e,t){super(e,"div",["winner-table"]),t&&(this.cars=t),this.drawTable()}drawTable(){var e;return i(this,void 0,void 0,(function*(){new r.CreateElement(this.element,"div",["table-element","table-header__number"],"â„–"),new r.CreateElement(this.element,"div",["table-element","table-header__car"],"Car"),new r.CreateElement(this.element,"div",["table-element","table-header__name"],"Name"),new r.CreateElement(this.element,"div",["table-element","table-header__wins"],"Wins"),new r.CreateElement(this.element,"div",["table-element","table-header__time"],"Time"),null===(e=this.cars)||void 0===e||e.result.forEach(((e,t)=>{this.drawTableRows(t,e)}))}))}drawTableRows(e,t){new r.CreateElement(this.element,"div",["table-element","table__number"],`${e+1}`),new r.CreateElement(this.element,"div",["table-element","table__color"],(0,a.carIcon)(t.color)),new r.CreateElement(this.element,"div",["table-element","table__name"],t.name),new r.CreateElement(this.element,"div",["table-element","table__wins"],`${t.wins}`),new r.CreateElement(this.element,"div",["table-element","table__time"],`${t.time} sec`)}}t.WinnersTable=o},572:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winner=void 0;const i=n(60);n(493);class r extends i.CreateElement{constructor(e,t){super(e,"div",["winner-screen"]);const n=new i.CreateElement(this.element,"h2",["winner-screen__title"]);n.element.style.color=`${t.color}`,n.element.innerHTML=`\n      <span>${t.name}</span>\n      Wins in \n      <span>${t.time}</span>\n      sec...\n    `}}t.Winner=r},360:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersWrapper=void 0;const r=n(60),a=n(647),o=n(52);n(560);class s extends r.CreateElement{constructor(e){super(e,"div",["winners-page"]),this.pageNumber=1,this.sort="time",this.order="DESC",this.title=new r.CreateElement(this.element,"h2",["title"]),this.page=new r.CreateElement(this.element,"h2",["title"]);const t=new r.CreateElement(this.element,"div",["pagination"]),n=new r.CreateElement(this.element,"div",["sort"]);new r.CreateElement(n.element,"button",["button","button-sort"],"Sort by time Asc").element.onclick=()=>{this.sort="time",this.order="ASC",this.drawPage()},new r.CreateElement(n.element,"button",["button","button-sort"],"Sort by time Desc").element.onclick=()=>{this.sort="time",this.order="DESC",this.drawPage()},new r.CreateElement(n.element,"button",["button","button-sort"],"Sort by Wins Asc").element.onclick=()=>{this.sort="wins",this.order="ASC",this.drawPage()},new r.CreateElement(n.element,"button",["button","button-sort"],"Sort by Wins Desc").element.onclick=()=>{this.sort="wins",this.order="DESC",this.drawPage()},this.buttonPrevPage=new r.CreateElement(t.element,"button",["button","button-generate"],"Prev. Page",!0),this.buttonPrevPage.element.setAttribute("type","button"),this.buttonPrevPage.element.onclick=()=>{this.pageNumber--,this.updatePage(),this.drawPage()},this.buttonNextPage=new r.CreateElement(t.element,"button",["button","button-generate"],"Next. Page"),this.buttonNextPage.element.setAttribute("type","button"),this.buttonNextPage.element.onclick=()=>{this.pageNumber++,this.updatePage(),this.drawPage()},this.drawPage()}getWinners(){return i(this,void 0,void 0,(function*(){this.winners=yield(0,a.getAllWinners)(this.pageNumber,10,this.sort,this.order)}))}drawPage(){return i(this,void 0,void 0,(function*(){yield this.getWinners(),this.winnersTable&&this.winnersTable.remove(),this.winnersTable=new o.WinnersTable(this.element,this.winners),this.updateTitle(),this.updatePage()}))}updateTitle(){var e;return i(this,void 0,void 0,(function*(){this.title.element.innerHTML=`Winners - (${null===(e=this.winners)||void 0===e?void 0:e.total} cars)`}))}updatePage(){var e;return i(this,void 0,void 0,(function*(){this.page.element.innerHTML=`Page - ${this.pageNumber}`;const t=Math.ceil(Number(null===(e=this.winners)||void 0===e?void 0:e.total)/10);1===this.pageNumber&&this.buttonPrevPage.setDisabled(!0),this.pageNumber>1&&this.buttonPrevPage.setDisabled(!1),this.pageNumber===t&&this.buttonNextPage.setDisabled(!0),this.pageNumber<t&&this.buttonNextPage.setDisabled(!1)}))}}t.WinnersWrapper=s},607:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),n(387);const r=n(931);window.addEventListener("DOMContentLoaded",(()=>i(void 0,void 0,void 0,(function*(){i(void 0,void 0,void 0,(function*(){const e=document.body;new r.GarageWrapper(e)}))}))))}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607),n(387)})();